<!DOCTYPE html>
<title>Blocks Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<script>
   var game = 0;
   var Time = 0;
   var box = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
   var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
   function Clock() {
      if (game == 1) {
         Time = Time + 1;
         Time = Math.floor(Time);
         document.getElementById("Time").innerHTML = Time;

      }
   }

   function Start(ev) {
      setTimeout("Stop()", 61000);  // Debug
      game = 1;
      ev.target.style.backgroundColor = "white";
      ev.target.style.color = "black";
      ev.target.style.border = "none";
      document.getElementById("random").innerHTML = "";
      shuffle(arr);
      for (var i = 0; i < arr.length; i++) {

         document.getElementById("random").innerHTML += "<td> <img draggable='true' ondragstart='drag(event)' src='Bloc/" + arr[i] + ".png' id='Img" + arr[i] + "' /></td>";

      }
      document.getElementById("Time").innerHTML = 0;

      setInterval(Clock, 1000);

   }

   function Check (){
         if (!document.getElementById("random").innerHTML.includes("img")) {
            Stop();
         }
      }


   function shuffle(array) {
      let currentIndex = array.length, randomIndex;

      // While there remain elements to shuffle.
      while (currentIndex != 0) {

         // Pick a remaining element.
         randomIndex = Math.floor(Math.random() * currentIndex);
         currentIndex--;

         // And swap it with the current element.
         [array[currentIndex], array[randomIndex]] = [
            array[randomIndex], array[currentIndex]];
      }

      return array;
   }


   function allowDrop(ev) {
      if (game == 1) { ev.preventDefault(); }
   }

   function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.id);
   }

   function drop(ev) {
      if (game == 1) {
     
      
         ev.preventDefault();
         var data = ev.dataTransfer.getData("text");
         document.getElementById(data).style.margin = "0%";
        // document.getElementById(data).style.width = "100%";
        // document.getElementById(data).style.height = "100%";
         document.getElementById(data).style.border = "none";
         ev.target.appendChild(document.getElementById(data));
         Check();
      }

   }


   function Stop() {
      game = 0;

      for (var i = 0; i < box.length; i++) {

         if (document.getElementById("box" + box[i]).innerHTML.split("Img")[1] != box[i] + '" style="margin: 0%; width: 100%; height: 100%; border: medium none;">') {
            document.getElementById("box" + box[i]).style.border = "5px solid red";
         } else {
            document.getElementById("box" + box[i]).style.border = "5px solid green";
         }

      }

   }
</script>

<style>
   div {
      height: 190px;
      width: 105px;
      margin-left: 10px;
      border: 5px solid black;
   }

   img {
      float: left;
      width: 104.5px;
      height: 190px;
      margin-left: 10px;
      border: 5px solid white;
   }

   #Time {
      width: 10%;
      text-align: center;
      background-color: green;
      border: 2px solid black;
      display: block;
      margin-left: auto;
      margin-right: auto;
      color: white;
   }
   
   table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}
</style>

<p id="Time" onclick="Start(event)">Start</p> <br>




<table>
<tr>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/1.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box1"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/2.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box2"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/3.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box3"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/4.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box4"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/5.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box5"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/6.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box6"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/7.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box7"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/8.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box8"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/9.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box9"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/10.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box10"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/11.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box11"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/12.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box12"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/13.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box13"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/14.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box14"></div> </td>
<td> <div ondrop="drop(event)" style="background-image: url('Bloc/Empty/15.png'); background-size: 100%;" ondragover="allowDrop(event)" id="box15"></div> </td>
</tr>
  <tr id="random">
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img1" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img2" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img3" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img4" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img5" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img6" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img7" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img8" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img9" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img10" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img11" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img12" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img13" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img14" /></td>
    <td><img draggable="true" ondragstart="drag(event)" src="Bloc/Unknown.png" id="Img15" /></td>
  </tr>
</table>
